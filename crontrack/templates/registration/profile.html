{% extends 'crontrack/base.html' %}

{% block title %} {{ user.username }}'s profile {% endblock %}

{% load timezones %}

{% block content %}
	<div class="hcenter">
		{% if user.is_authenticated %}
			<h2>{{ user.username }}'s profile</h2>
			<div class="center">
				<h3>Account Settings</h3>
				<form action="{% url 'crontrack:profile' %}" method="post">
					{% csrf_token %}
					<table class="form">
						<tr>
							<td>Timezone</td>
							<td>{% timezone_selector prefill.timezone|default:user.profile.timezone %}</td>
						</tr>
					</table>
					<br><center><input type="submit" value="Confirm"></center>
				</form>
				<br>
				{% if error_message %} <!-- TODO: make a templatetag for success/error messages -->
					<span class="errorMessage">Error: {{ error_message }}.</span>
				{% endif %}
				{% if success_message %}
					<span class="successMessage">{{ success_message }}</span>
				{% endif %}
			</div>
		{% else %}
			<p>You are not logged in.</p> <!-- TODO: make a template tag for this -->
			<a href="{% url 'crontrack:login' %}">Log in</a>
		{% endif %}
	</div>
{% endblock %}